(function(c,a,d,e){var b={};b.init=function(){b.container=d(".md-ads"),b.checkboxes=d(".md-filter-attr.checkbox-group input"),b.selects=d(".md-select"),b.btnShowFilters=d("#showFilters"),b.filters=[];b.filters.all="*";let rangeFilters={price:{min:0,max:10000000},power:{min:0,max:10000000},mileage:{min:0,max:10000000}};let sorting="original-order";b.checkboxes.on("change",function(B){B.preventDefault();b.container.trigger("filter-update");b.updateLocationHash(b.filters,b.options.sortBy)});b.selects.on("change",function(B){B.preventDefault();b.container.trigger("filter-update");b.updateLocationHash(b.filters,b.options.sortBy)});b.container.on("filter-update",function(D,C){var F=[],B=[];var E=d(".md-filters select.sorting").val();b.options.sortBy=E?E:"original-order";b.checkboxes.each(function(G,H){if(H.checked){F.push(H.value)}});b.filters["checkbox-group"]=F.length?F:"";b.selects.each(function(G,I){var H=d(I);if(!d(I).hasClass("sorting")){if(H.val()!="*"){B.push(H.val())}}});b.filters.select=B.length?B.join(""):false;b.filters["select-group"]=B.length?B:"";b.filters.all=b.concatValues(b.filters)});var s=parseInt(d(".md-ads .item:first-child").data("price"));var x=0;d(".md-ads .item").each(function(){var B=parseInt(d(this).data("price"));if(B<s&&B!=""){s=B}if(B>x&&B!=""){x=B}});var l=parseInt(d(".md-ads .item:first-child").data("power"));var p=0;d(".md-ads .item").each(function(){var B=parseInt(d(this).data("power"));if(B<l&&B!=""){l=B}if(B>p&&B!=""){p=B}});var g=parseInt(d(".md-ads .item:first-child").data("mileage"));var v=0;d(".md-ads .item").each(function(){var B=parseInt(d(this).data("mileage"));if(B<g&&B!=""){g=B}if(B>v&&B!=""){v=B}});var t=d("#priceSlider").slider({tooltip_split:true,min:Number(s?s:rangeFilters.price.min),max:Number(x?x:rangeFilters.price.max),range:true,values:[Number(s?s:rangeFilters.price.min),Number(x?x:rangeFilters.price.max)]});var k=d("#powerSlider").slider({tooltip_split:true,min:Number(l?l:rangeFilters.power.min),max:Number(p?p:rangeFilters.power.max),range:true,values:[Number(l?l:rangeFilters.power.min),Number(p?p:rangeFilters.power.max)]});var u=d("#mileageSlider").slider({tooltip_split:true,min:Number(g?g:rangeFilters.mileage.min),max:Number(v?v:rangeFilters.mileage.max),range:true,values:[Number(g?g:rangeFilters.mileage.min),Number(v?v:rangeFilters.mileage.max)]});var w=s.toLocaleString("de-DE",{style:"currency",currency:"EUR"});var r=x.toLocaleString("de-DE",{style:"currency",currency:"EUR"});var f=l.toLocaleString("de-DE",{style:"decimal"})+"KW";var j=p.toLocaleString("de-DE",{style:"decimal"})+"KW";var A=g.toLocaleString("de-DE",{style:"decimal"})+"km";var m=v.toLocaleString("de-DE",{style:"decimal"})+"km";d("#priceSlider .ui-slider-handle:nth-of-type(1)").attr("data-price-min",w);d("#priceSlider .ui-slider-handle:nth-of-type(2)").attr("data-price-max",r);d("#powerSlider .ui-slider-handle:nth-of-type(1)").attr("data-power-min",f);d("#powerSlider .ui-slider-handle:nth-of-type(2)").attr("data-power-max",j);d("#mileageSlider .ui-slider-handle:nth-of-type(1)").attr("data-mileage-min",A);d("#mileageSlider .ui-slider-handle:nth-of-type(2)").attr("data-mileage-max",m);var n=location.hash.match(/priceMin=([^&]+)/i);if(n!=null){n=parseFloat(n[1])}var q=location.hash.match(/priceMax=([^&]+)/i);if(q!=null){q=parseFloat(q[1])}var h=location.hash.match(/powerMin=([^&]+)/i);if(h!=null){h=parseFloat(h[1])}var i=location.hash.match(/powerMax=([^&]+)/i);if(i!=null){i=parseFloat(i[1])}var y=location.hash.match(/mileageMin=([^&]+)/i);if(y!=null){y=parseFloat(y[1])}var z=location.hash.match(/mileageMax=([^&]+)/i);if(z!=null){z=parseFloat(z[1])}if(n!=null&&q!=null){t.slider("values",[n,q]);d("#priceSlider span:nth-of-type(1)").attr("data-price-min",n.toLocaleString("de-DE",{style:"currency",currency:"EUR"}));d("#priceSlider span:nth-of-type(2)").attr("data-price-max",q.toLocaleString("de-DE",{style:"currency",currency:"EUR"}));d("#priceSlider").closest(".range-slider").addClass("updated");rangeFilters.price.min=n;rangeFilters.price.max=q}if(h!=null&&i!=null){k.slider("values",[h,i]);d("#powerSlider span:nth-of-type(1)").attr("data-power-min",h.toLocaleString("de-DE",{style:"decimal"})+"KW");d("#powerSlider span:nth-of-type(2)").attr("data-power-max",i.toLocaleString("de-DE",{style:"decimal"})+"KW");d("#powerSlider").closest(".range-slider").addClass("updated");rangeFilters.power.min=h;rangeFilters.power.max=i}if(y!=null&&z!=null){u.slider("values",[y,z]);d("#mileageSlider span:nth-of-type(1)").attr("data-mileage-min",y.toLocaleString("de-DE",{style:"decimal"})+"km");d("#mileageSlider span:nth-of-type(2)").attr("data-mileage-max",z.toLocaleString("de-DE",{style:"decimal"})+"km");d("#mileageSlider").closest(".range-slider").addClass("updated");rangeFilters.mileage.min=y;rangeFilters.mileage.max=z}b.options={itemSelector:".item",layoutMode:"fitRows",getSortData:{price:"[data-price] parseFloat",power:"[data-power] parseFloat",mileage:"[data-mileage] parseFloat",title:function(B){return d(B).find(".title").text()},number:".number parseInt",category:"[data-category]"},sortBy:sorting,filter:function(){var G=d(this);var E=G.attr("data-price");var H=(rangeFilters.price.min<=E&&rangeFilters.price.max>=E);var D=G.attr("data-power");var B=(rangeFilters.power.min<=D&&rangeFilters.power.max>=D);var C=G.attr("data-mileage");var F=(rangeFilters.mileage.min<=C&&rangeFilters.mileage.max>=C);return G.is(b.filters.all)&&H&&B&&F}};b.updateFiltersFromHash();b.container.isotope(b.options);b.btnShowFilters.click(function(){d(".md-filters .md-filters-body").toggle()});d("#shuffle").click(function(){b.container.isotope("shuffle")});if(typeof mdListShuffle!=="undefined"&&mdListShuffle===1){d("#shuffle").trigger("click")}b.container.on("arrangeComplete",function(){if(!b.container.data("isotope").filteredItems.length){d(".md-no-result").show()}else{d(".md-no-result").hide()}});d("#filterReset").on("click",function(){d(".md-filters input[type=checkbox]").prop("checked",false);d(".md-filters select").val("*");d(".range-slider").removeClass("updated");if(typeof t!=="undefined"){var B=t.slider("option");t.slider("values",[B.min,B.max]);d("#priceSlider span:nth-of-type(1)").attr("data-price-min",B.min.toLocaleString("de-DE",{style:"currency",currency:"EUR"}));d("#priceSlider span:nth-of-type(2)").attr("data-price-max",B.max.toLocaleString("de-DE",{style:"currency",currency:"EUR"}))}if(typeof k!=="undefined"){B=k.slider("option");k.slider("values",[B.min,B.max]);d("#powerSlider span:nth-of-type(1)").attr("data-power-min",B.min.toLocaleString("de-DE",{style:"decimal"})+"KW");d("#powerSlider span:nth-of-type(2)").attr("data-power-max",B.max.toLocaleString("de-DE",{style:"decimal"})+"KW")}if(typeof u!=="undefined"){B=u.slider("option");u.slider("values",[B.min,B.max]);d("#mileageSlider span:nth-of-type(1)").attr("data-mileage-min",B.min.toLocaleString("de-DE",{style:"decimal"})+"km");d("#mileageSlider span:nth-of-type(2)").attr("data-mileage-max",B.max.toLocaleString("de-DE",{style:"decimal"})+"km")}rangeFilters={price:{min:0,max:10000000},power:{min:0,max:10000000},mileage:{min:0,max:10000000}};b.container.isotope({filter:"*"});b.container.trigger("filter-update");b.updateLocationHash(b.filters,b.options.sortBy);return false});function o(D,B,I){var E=+I.values[0],H=+I.values[1],J=D.attr("data-filter-group");var C=D.attr("id");if(C=="priceSlider"){var G=E.toLocaleString("de-DE",{style:"currency",currency:"EUR"});var F=H.toLocaleString("de-DE",{style:"currency",currency:"EUR"});d(".ui-slider-handle:nth-of-type(1)").attr("data-price-min",G);d(".ui-slider-handle:nth-of-type(2)").attr("data-price-max",F)}if(C=="powerSlider"){var G=E.toLocaleString("de-DE",{style:"decimal"})+"KW";var F=H.toLocaleString("de-DE",{style:"decimal"})+"KW";d(".ui-slider-handle:nth-of-type(1)").attr("data-power-min",G);d(".ui-slider-handle:nth-of-type(2)").attr("data-power-max",F)}if(C=="mileageSlider"){var G=E.toLocaleString("de-DE",{style:"decimal"})+"km";var F=H.toLocaleString("de-DE",{style:"decimal"})+"km";d(".ui-slider-handle:nth-of-type(1)").attr("data-mileage-min",G);d(".ui-slider-handle:nth-of-type(2)").attr("data-mileage-max",F)}D.closest(".range-slider").addClass("updated");rangeFilters[J]={min:E||min,max:H||max};b.container.isotope(b.options);b.updateLocationHash(b.filters,b.options.sortBy)}t.on("slide",function(B,C){var D=d(this);o(D,B,C)});k.on("slide",function(B,C){var D=d(this);o(D,B,C)});u.on("slide",function(B,C){var D=d(this);o(D,B,C)})};b.updateLocationHash=function(g,i){var j="";if(g.all!=="*"){j="filter="+encodeURIComponent(g.all)}if(g.all!=="*"&&i!=="original-order"){j+="&"}if(i!=="original-order"){j+="sort="+encodeURIComponent(i)}d(".range-slider.updated").each(function(){if(d(this).find("> div").attr("id")=="priceSlider"){var l=d(this).find("span:nth-of-type(1)").attr("data-price-min").replace("€","").replace(".","").replace(",",".");var k=d(this).find("span:nth-of-type(2)").attr("data-price-max").replace("€","").replace(".","").replace(",",".");if(j!=""){j+="&"}j+="priceMin="+d.trim(l);j+="&priceMax="+d.trim(k)}if(d(this).find("> div").attr("id")=="powerSlider"){var l=d(this).find("span:nth-of-type(1)").attr("data-power-min").replace("KW","").replace(".","").replace(",",".");var k=d(this).find("span:nth-of-type(2)").attr("data-power-max").replace("KW","").replace(".","").replace(",",".");if(j!=""){j+="&"}j+="powerMin="+l;j+="&powerMax="+k}if(d(this).find("> div").attr("id")=="mileageSlider"){var l=d(this).find("span:nth-of-type(1)").attr("data-mileage-min").replace("km","").replace(".","").replace(",",".");var k=d(this).find("span:nth-of-type(2)").attr("data-mileage-max").replace("km","").replace(".","").replace(",",".");if(j!=""){j+="&"}j+="mileageMin="+l;j+="&mileageMax="+k}});j=j.replace(new RegExp("%2C","g"),"");location.hash=j;var h=d(".md-filters .submit");if(h.length>0){var f=h.attr("href").split("#");h.attr("href",f[0]+"#"+j)}b.container.isotope(b.options)};b.getHashFilter=function(){var f=location.hash.match(/filter=([^&]+)/i);var g=f&&f[1];return g&&decodeURIComponent(g)};b.getHashSorting=function(){var g=location.hash.match(/sort=([^&]+)/i);var f=g&&g[1];return f&&decodeURIComponent(f)};b.updateFiltersFromHash=function(){var h=b.getHashFilter();var g=b.getHashSorting();if(!h&&!g){return}if(h!==null){var f=h.split(".");b.selects.val("*");d.each(f,function(i,j){if(j){d('.md-select option[value=".'+j+'"]').parent().val("."+j);d('.md-filter-attr :checkbox[value=".'+j+'"]').prop("checked","true")}})}d(".md-select.sorting").val(g);b.container.trigger("filter-update");b.container.isotope(b.options)};b.concatValues=function(g){var f=[];if(typeof g["checkbox-group"]!=="undefined"&&g["checkbox-group"]!==""){for(var h in g["checkbox-group"]){if(g.select){f.push(g["checkbox-group"][h]+g.select)}else{f.push(g["checkbox-group"][h])}}return f.join(",")}if(!g.select||0===g.select.length){return"*"}return g.select};d(c).on("hashchange",b.updateFiltersFromHash);d(c).on("load",b.init)})(window,document,jQuery);